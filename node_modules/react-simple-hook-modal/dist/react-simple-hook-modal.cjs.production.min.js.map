{"version":3,"file":"react-simple-hook-modal.cjs.production.min.js","sources":["../src/hooks/useModalTransition.ts","../src/ModalContext.ts","../src/components/ModalContainer.tsx","../src/components/Modal.tsx","../src/hooks/useModalContext.ts","../src/components/ModalProvider.tsx","../src/hooks/useModal.ts"],"sourcesContent":["import { useTransition } from 'react-spring';\n\nexport enum ModalTransition {\n  NONE = 'NONE',\n  SCALE = 'SCALE',\n  TOP_DOWN = 'TOP_DOWN',\n  BOTTOM_UP = 'BOTTOM_UP',\n}\n\nconst ModalTransitionConfig: { [key in ModalTransition]: object } = {\n  NONE: {\n    from: { transform: 'scale(1)' },\n    enter: { transform: 'scale(1)' },\n    leave: { transform: 'scale(1)' },\n  },\n  SCALE: {\n    from: { transform: 'scale(0)', opacity: 0 },\n    enter: { transform: 'scale(1)', opacity: 1 },\n    leave: { transform: 'scale(0)', opacity: 0 },\n    config: { tension: 800, friction: 25 },\n  },\n  TOP_DOWN: {\n    from: { transform: 'translateY(-150%)' },\n    enter: { transform: 'translateY(0)' },\n    leave: { transform: 'translateY(-150%)' },\n    config: { tension: 500, friction: 25 },\n  },\n  BOTTOM_UP: {\n    from: { transform: 'translateY(150%)' },\n    enter: { transform: 'translateY(0)' },\n    leave: { transform: 'translateY(150%)' },\n    config: { tension: 500, friction: 25 },\n  },\n};\n\nexport const useModalTransition = (\n  transition: ModalTransition = ModalTransition.SCALE,\n  isOpen: boolean\n) => {\n  return useTransition(isOpen, null, ModalTransitionConfig[transition]);\n};\n","import React from 'react';\n\nexport interface Context {\n  addOrUpdate(id: string): void;\n  remove(id: string): void;\n  getStaggerPixels(id: string): number;\n}\n\nexport const ModalContext = React.createContext({} as Context);\n","import React from 'react';\nimport { animated } from 'react-spring';\nimport {\n  useModalTransition,\n  ModalTransition,\n} from '../hooks/useModalTransition';\nimport { ModalProps } from './Modal';\n\ninterface Props {\n  transformDistance: number;\n}\n\nexport const ModalContainer: React.FC<ModalProps & Props> = ({\n  children,\n  isOpen,\n  footer,\n  transition,\n  onBackdropClick,\n  transformDistance,\n  modalClassName,\n}) => {\n  const modalTransitions = useModalTransition(transition, isOpen);\n\n  return (\n    <>\n      {modalTransitions.map(\n        ({ item, key, props }) =>\n          item && (\n            <animated.div\n              key={key}\n              style={props}\n              className=\"rsm-fixed rsm-inset-0 rsm-m-4 sm:rsm-m-8 rsm-flex rsm-justify-center rsm-items-center rsm-z-40\"\n              onClick={onBackdropClick}\n            >\n              <div\n                className={`rsm-bg-white rsm-rounded-md rsm-overflow-auto rsm-max-h-full rsm-w-full md:rsm-w-10/12 xl:rsm-w-1/2 rsm-opactiy-100 rsm-shadow-lg rsm-z-50 rsm-border rsm-border-gray-200 rsm-flex rsm-flex-col ${modalClassName ??\n                  ''}`}\n                style={{\n                  minHeight: '70%',\n                  transition:\n                    transition === ModalTransition.NONE\n                      ? ''\n                      : 'transform ease-in-out .2s',\n                  transform: `translate(${transformDistance}px, ${transformDistance}px)`,\n                  transformOrigin: 'center',\n                }}\n                onClick={e => e.stopPropagation()}\n              >\n                <div className=\"rsm-flex-1 rsm-p-8\">{children}</div>\n                {!footer ? null : (\n                  <div className=\"rsm-bg-gray-200 rsm-p-4\">{footer}</div>\n                )}\n              </div>\n            </animated.div>\n          )\n      )}\n    </>\n  );\n};\n","import React, { useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useModalContext } from '../hooks/useModalContext';\nimport { ModalTransition } from '../hooks/useModalTransition';\nimport { ModalContainer } from './ModalContainer';\n\nexport interface ModalProps {\n  id: string;\n  isOpen: boolean;\n  onBackdropClick?: () => void;\n  footer?: React.ReactNode;\n  transition?: ModalTransition;\n  modalClassName?: string;\n}\n\nfunction hasDOM() {\n  return !!(\n    typeof window !== 'undefined' &&\n    window.document &&\n    window.document.createElement\n  );\n}\n\nexport const Modal: React.FC<ModalProps> = modal => {\n  const { addOrUpdate, remove, getStaggerPixels } = useModalContext();\n  const { id, isOpen } = modal;\n\n  const container = hasDOM()\n    ? document.getElementById('react-simple-modal-container')\n    : null;\n\n  useEffect(() => {\n    isOpen ? addOrUpdate(id) : remove(id);\n    return () => remove(id);\n  }, [id, isOpen]);\n\n  return container\n    ? ReactDOM.createPortal(\n        <ModalContainer transformDistance={getStaggerPixels(id)} {...modal} />,\n        container\n      )\n    : null;\n};\n","import { useContext } from 'react';\nimport { ModalContext, Context } from '../ModalContext';\n\nexport const useModalContext = () => useContext<Context>(ModalContext);\n","import React, { useState, useCallback } from 'react';\nimport { ModalContext } from '../ModalContext';\n\nexport interface ModalProviderProps {\n  backdropClassName?: string;\n}\n\nexport const ModalProvider: React.FC<ModalProviderProps> = ({\n  children,\n  backdropClassName,\n}) => {\n  const [openModals, setOpenModals] = useState<string[]>([]);\n\n  const addOrUpdate = useCallback((_id: string) => {\n    setOpenModals(prev => {\n      const exists = prev.some(id => id === _id);\n      return exists ? prev : [...prev, _id];\n    });\n  }, []);\n\n  const remove = useCallback((_id: string) => {\n    setOpenModals(prev => prev.filter(id => id !== _id));\n  }, []);\n\n  const modalOpen = openModals.length > 0;\n\n  const getStaggerPixels = useCallback(\n    (_id: string) => {\n      const index = openModals.findIndex(id => id === _id);\n      return openModals.length * 8 - (index + 1) * 8;\n    },\n    [openModals]\n  );\n\n  return (\n    <ModalContext.Provider value={{ addOrUpdate, remove, getStaggerPixels }}>\n      {children}\n      {!modalOpen ? null : (\n        <div\n          className={\n            'rsm-fixed rsm-inset-0 rsm-opacity-50 rsm-z-40 rsm-bg-gray-700 ' +\n              backdropClassName || ''\n          }\n        />\n      )}\n      <div id=\"react-simple-modal-container\" />\n    </ModalContext.Provider>\n  );\n};\n","import { useState, useCallback } from 'react';\n\nexport const useModal = () => {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  const openModal = useCallback(() => setIsModalOpen(true), []);\n  const closeModal = useCallback(() => setIsModalOpen(false), []);\n\n  return {\n    isModalOpen,\n    openModal,\n    closeModal,\n  };\n};\n"],"names":["ModalTransition","ModalContext","React","createContext","ModalTransitionConfig","NONE","from","transform","enter","leave","SCALE","opacity","config","tension","friction","TOP_DOWN","BOTTOM_UP","ModalContainer","children","footer","transition","onBackdropClick","transformDistance","modalClassName","modalTransitions","isOpen","useTransition","useModalTransition","map","item","animated","div","key","style","props","className","onClick","minHeight","transformOrigin","e","stopPropagation","modal","useContext","addOrUpdate","remove","getStaggerPixels","id","container","window","document","createElement","getElementById","useEffect","ReactDOM","createPortal","backdropClassName","useState","openModals","setOpenModals","useCallback","_id","prev","some","filter","modalOpen","length","index","findIndex","Provider","value","setIsModalOpen","isModalOpen","openModal","closeModal"],"mappings":"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"}