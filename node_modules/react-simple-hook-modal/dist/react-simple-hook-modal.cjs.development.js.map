{"version":3,"file":"react-simple-hook-modal.cjs.development.js","sources":["../src/ModalContext.ts","../src/hooks/useModalContext.ts","../src/hooks/useModalTransition.ts","../src/components/ModalContainer.tsx","../src/components/Modal.tsx","../src/components/ModalProvider.tsx","../src/hooks/useModal.ts"],"sourcesContent":["import React from 'react';\n\nexport interface Context {\n  addOrUpdate(id: string): void;\n  remove(id: string): void;\n  getStaggerPixels(id: string): number;\n}\n\nexport const ModalContext = React.createContext({} as Context);\n","import { useContext } from 'react';\nimport { ModalContext, Context } from '../ModalContext';\n\nexport const useModalContext = () => useContext<Context>(ModalContext);\n","import { useTransition } from 'react-spring';\n\nexport enum ModalTransition {\n  NONE = 'NONE',\n  SCALE = 'SCALE',\n  TOP_DOWN = 'TOP_DOWN',\n  BOTTOM_UP = 'BOTTOM_UP',\n}\n\nconst ModalTransitionConfig: { [key in ModalTransition]: object } = {\n  NONE: {\n    from: { transform: 'scale(1)' },\n    enter: { transform: 'scale(1)' },\n    leave: { transform: 'scale(1)' },\n  },\n  SCALE: {\n    from: { transform: 'scale(0)', opacity: 0 },\n    enter: { transform: 'scale(1)', opacity: 1 },\n    leave: { transform: 'scale(0)', opacity: 0 },\n    config: { tension: 800, friction: 25 },\n  },\n  TOP_DOWN: {\n    from: { transform: 'translateY(-150%)' },\n    enter: { transform: 'translateY(0)' },\n    leave: { transform: 'translateY(-150%)' },\n    config: { tension: 500, friction: 25 },\n  },\n  BOTTOM_UP: {\n    from: { transform: 'translateY(150%)' },\n    enter: { transform: 'translateY(0)' },\n    leave: { transform: 'translateY(150%)' },\n    config: { tension: 500, friction: 25 },\n  },\n};\n\nexport const useModalTransition = (\n  transition: ModalTransition = ModalTransition.SCALE,\n  isOpen: boolean\n) => {\n  return useTransition(isOpen, null, ModalTransitionConfig[transition]);\n};\n","import React from 'react';\nimport { animated } from 'react-spring';\nimport {\n  useModalTransition,\n  ModalTransition,\n} from '../hooks/useModalTransition';\nimport { ModalProps } from './Modal';\n\ninterface Props {\n  transformDistance: number;\n}\n\nexport const ModalContainer: React.FC<ModalProps & Props> = ({\n  children,\n  isOpen,\n  footer,\n  transition,\n  onBackdropClick,\n  transformDistance,\n  modalClassName,\n}) => {\n  const modalTransitions = useModalTransition(transition, isOpen);\n\n  return (\n    <>\n      {modalTransitions.map(\n        ({ item, key, props }) =>\n          item && (\n            <animated.div\n              key={key}\n              style={props}\n              className=\"rsm-fixed rsm-inset-0 rsm-m-4 sm:rsm-m-8 rsm-flex rsm-justify-center rsm-items-center rsm-z-40\"\n              onClick={onBackdropClick}\n            >\n              <div\n                className={`rsm-bg-white rsm-rounded-md rsm-overflow-auto rsm-max-h-full rsm-w-full md:rsm-w-10/12 xl:rsm-w-1/2 rsm-opactiy-100 rsm-shadow-lg rsm-z-50 rsm-border rsm-border-gray-200 rsm-flex rsm-flex-col ${modalClassName ??\n                  ''}`}\n                style={{\n                  minHeight: '70%',\n                  transition:\n                    transition === ModalTransition.NONE\n                      ? ''\n                      : 'transform ease-in-out .2s',\n                  transform: `translate(${transformDistance}px, ${transformDistance}px)`,\n                  transformOrigin: 'center',\n                }}\n                onClick={e => e.stopPropagation()}\n              >\n                <div className=\"rsm-flex-1 rsm-p-8\">{children}</div>\n                {!footer ? null : (\n                  <div className=\"rsm-bg-gray-200 rsm-p-4\">{footer}</div>\n                )}\n              </div>\n            </animated.div>\n          )\n      )}\n    </>\n  );\n};\n","import React, { useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useModalContext } from '../hooks/useModalContext';\nimport { ModalTransition } from '../hooks/useModalTransition';\nimport { ModalContainer } from './ModalContainer';\n\nexport interface ModalProps {\n  id: string;\n  isOpen: boolean;\n  onBackdropClick?: () => void;\n  footer?: React.ReactNode;\n  transition?: ModalTransition;\n  modalClassName?: string;\n}\n\nfunction hasDOM() {\n  return !!(\n    typeof window !== 'undefined' &&\n    window.document &&\n    window.document.createElement\n  );\n}\n\nexport const Modal: React.FC<ModalProps> = modal => {\n  const { addOrUpdate, remove, getStaggerPixels } = useModalContext();\n  const { id, isOpen } = modal;\n\n  const container = hasDOM()\n    ? document.getElementById('react-simple-modal-container')\n    : null;\n\n  useEffect(() => {\n    isOpen ? addOrUpdate(id) : remove(id);\n    return () => remove(id);\n  }, [id, isOpen]);\n\n  return container\n    ? ReactDOM.createPortal(\n        <ModalContainer transformDistance={getStaggerPixels(id)} {...modal} />,\n        container\n      )\n    : null;\n};\n","import React, { useState, useCallback } from 'react';\nimport { ModalContext } from '../ModalContext';\n\nexport interface ModalProviderProps {\n  backdropClassName?: string;\n}\n\nexport const ModalProvider: React.FC<ModalProviderProps> = ({\n  children,\n  backdropClassName,\n}) => {\n  const [openModals, setOpenModals] = useState<string[]>([]);\n\n  const addOrUpdate = useCallback((_id: string) => {\n    setOpenModals(prev => {\n      const exists = prev.some(id => id === _id);\n      return exists ? prev : [...prev, _id];\n    });\n  }, []);\n\n  const remove = useCallback((_id: string) => {\n    setOpenModals(prev => prev.filter(id => id !== _id));\n  }, []);\n\n  const modalOpen = openModals.length > 0;\n\n  const getStaggerPixels = useCallback(\n    (_id: string) => {\n      const index = openModals.findIndex(id => id === _id);\n      return openModals.length * 8 - (index + 1) * 8;\n    },\n    [openModals]\n  );\n\n  return (\n    <ModalContext.Provider value={{ addOrUpdate, remove, getStaggerPixels }}>\n      {children}\n      {!modalOpen ? null : (\n        <div\n          className={\n            'rsm-fixed rsm-inset-0 rsm-opacity-50 rsm-z-40 rsm-bg-gray-700 ' +\n              backdropClassName || ''\n          }\n        />\n      )}\n      <div id=\"react-simple-modal-container\" />\n    </ModalContext.Provider>\n  );\n};\n","import { useState, useCallback } from 'react';\n\nexport const useModal = () => {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  const openModal = useCallback(() => setIsModalOpen(true), []);\n  const closeModal = useCallback(() => setIsModalOpen(false), []);\n\n  return {\n    isModalOpen,\n    openModal,\n    closeModal,\n  };\n};\n"],"names":["ModalContext","React","createContext","useModalContext","useContext","ModalTransition","ModalTransitionConfig","NONE","from","transform","enter","leave","SCALE","opacity","config","tension","friction","TOP_DOWN","BOTTOM_UP","useModalTransition","transition","isOpen","useTransition","ModalContainer","children","footer","onBackdropClick","transformDistance","modalClassName","modalTransitions","map","item","key","props","animated","div","style","className","onClick","minHeight","transformOrigin","e","stopPropagation","hasDOM","window","document","createElement","Modal","modal","addOrUpdate","remove","getStaggerPixels","id","container","getElementById","useEffect","ReactDOM","createPortal","ModalProvider","backdropClassName","useState","openModals","setOpenModals","useCallback","_id","prev","exists","some","filter","modalOpen","length","index","findIndex","Provider","value","useModal","isModalOpen","setIsModalOpen","openModal","closeModal"],"mappings":"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"}